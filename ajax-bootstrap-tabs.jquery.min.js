(function(b){b.fn.ajaxBootstrapTabs=function(k){var a=b.extend({default_tab:null,tab_wrapper:"",tab:"",tab_active:"",tab_inactive:null,pane_wrapper:"",pane:"",pane_active:"",pane_inactive:null,link:"",tab_prefix:"tab-"},k),e=this,g=null,f=b(window).scrollTop(),h=a.default_tab?a.default_tab.replace(/^#/,""):b(a.pane_wrapper).find(a.pane+":first-child").attr("id");b(a.pane_wrapper+" "+a.pane).each(function(c){b(this).attr("id",a.tab_prefix+b(this).attr("id"))});var d=function(c,d){f=b(window).scrollTop();void 0===d&&(d=!0);c=c.replace(/^#/,"");tab_wrapper=b(a.tab_wrapper);tab_wrapper.find(a.tab+"[href$='#"+c+"']").length&&b(a.pane_wrapper+" "+a.pane+"#"+a.tab_prefix+c).length||(c=h);a.tab_inactive?(tab_wrapper.find(a.tab).removeClass(a.tab_active.replace(/^\./,"")).addClass(a.tab_inactive.replace(/^\./,"")),tab_wrapper.find(a.tab+"[href$='#"+c+"']").addClass(a.tab_active.replace(/^\./,"")).removeClass(a.tab_inactive.replace(/^\./,""))):(tab_wrapper.find(a.tab).removeClass(a.tab_active.replace(/^\./,"")),tab_wrapper.find(a.tab+"[href$='#"+c+"']").addClass(a.tab_active.replace(/^\./,"")));a.pane_inactive?b(a.pane_wrapper+" "+a.pane+"#"+a.tab_prefix+c).removeClass(a.pane_inactive.replace(/^\./,"")).addClass(a.pane_active.replace(/^\./,"")).siblings(a.pane).removeClass(a.pane_active.replace(/^\./,"")).addClass(a.pane_inactive.replace(/^\./,"")):b(a.pane_wrapper+" "+a.pane+"#"+a.tab_prefix+c).addClass(a.pane_active.replace(/^\./,"")).siblings(a.pane).removeClass(a.pane_active.replace(/^\./,""));void 0===b(a.pane_wrapper+" "+a.pane+"#"+a.tab_prefix+c).data("url")||b(a.pane_wrapper+" "+a.pane+"#"+a.tab_prefix+c).html().length||(b(a.pane_wrapper+" "+a.pane+"#"+a.tab_prefix+c).append(b("<div></div>").addClass("loading")),b.ajax({url:b(a.pane_wrapper+" "+a.pane+"#"+a.tab_prefix+c).data("url"),async:!0}).done(function(d){b(a.pane_wrapper+" "+a.pane+"#"+a.tab_prefix+c).html(d)}));d&&(g=c,d.pushState?d.pushState("#"+c,null,"#"+c):location.hash="#"+c);b(e).trigger("ajaxbootstraptabs.change",[c]);b(window).scrollTop(f)};window.location.hash?d(window.location.hash):d(h);if(window.history&&window.history.pushState)b(window).on("popstate",function(){location.hash.replace(/^#/,"")!==g&&(d(location.hash,!1),b(window).scrollTop(f))});b(e).on("click",a.tab_wrapper+" "+a.tab,function(a){a.preventDefault();d(b(this).attr("href"))});b(e).on("click",a.link,function(a){a.preventDefault();d(b(this).attr("href"))});return e}})(jQuery);